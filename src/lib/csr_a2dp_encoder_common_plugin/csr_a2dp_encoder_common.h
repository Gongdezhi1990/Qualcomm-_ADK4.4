/****************************************************************************
Copyright (c) 2005 - 2016 Qualcomm Technologies International, Ltd.

FILE NAME
    csr_a2dp_encoder_common.h

DESCRIPTION
    
    
NOTES
   
*/

#ifndef _CSR_A2DP_ENCODER_COMMON_H_
#define _CSR_A2DP_ENCODER_COMMON_H_

#ifdef DEBUG_PRINT_ENABLED
#define KALIMBA_SEND_MESSAGE(id, a, b, c, d) \
if(!KalimbaSendMessage(id, a, b, c, d)) \
{\
    PRINT(("KalimbaSendMessageFailed %d\n", id)); \
    Panic(); \
}
#else
#define KALIMBA_SEND_MESSAGE(id, a, b, c, d) \
PanicFalse(KalimbaSendMessage(id, a, b, c, d));
#endif

#define DSP_PORT_USB_IN             0
#define DSP_PORT_USB_OUT            1
#define DSP_PORT_ANALOGUE_IN_L      0
#define DSP_PORT_ANALOGUE_IN_R      1
#define DSP_PORT_SPDIF_IN_L         0
#define DSP_PORT_SPDIF_IN_R         1
#define DSP_PORT_I2S_IN_L           0
#define DSP_PORT_I2S_IN_R           1
#define DSP_PORT_A2DP_DEV_A         2
#define DSP_PORT_A2DP_DEV_B         3

/* Defines used to parse channel status message from SPDIF input
 * and to set the corresponding SCMS bits in the RTP encoder */
/* Position of consumer/professional bit */
#define CHANNEL_STATUS_CON_PRO_BIT  (1)
#define CHANNEL_STATUS_CONSUMER     (0)
#define CHANNEL_STATUS_PROFESSIONAL (1)

/* Position of CP-bit in Channel Status message */
#define CHANNEL_STATUS_CP_BIT       (1<<2)      
/* Position of L-bit in Channel Status message */
#define CHANNEL_STATUS_L_BIT        (1<<15)
/* Enable CP-bit in SCMS parameter to RTP encoder transform */
#define SCMS_BITS_CP_ON             (1<<1)
/* Enable L-bit in SCMS parameter to RTP encoder transform */
#define SCMS_BITS_L_ON              (1)


void CsrA2dpEncoderPluginConnect(A2dpEncoderPluginTaskdata *task, uint16 volume, uint32 rate, AUDIO_MODE_T mode, const void *params);
void CsrA2dpEncoderPluginDisconnect(Task plugin_task);
void CsrA2dpEncoderPluginSetVolume(uint16 volume);
void CsrA2dpEncoderPluginSetMode(A2dpEncoderPluginTaskdata *task, AUDIO_MODE_T mode, void *params);

/****************************************************************************
FUNCTION
    CsrA2dpEncoderPluginInternalMessage

DESCRIPTION
    Handle internal messages and messages from the DSP
*/
void CsrA2dpEncoderPluginInternalMessage(A2dpEncoderPluginTaskdata *task, uint16 id, Message message);


#endif /* _CSR_A2DP_ENCODER_COMMON_H_ */
